import React from 'react';
import { cleanup } from '@testing-library/react';

import { Heading, Table, Overline, Lead, Subtitle } from '.';
import renderWithTheme from '../../../test/_setup-theme-provider';

afterAll(cleanup);

describe('packages/typography', () => {
  describe('<Heading />', () => {
    const className = 'test-heading-class';
    const title = 'Test heading title';
    const child = 'Heading child';

    const renderedComponent = renderWithTheme(
      <Heading className={className} title={title}>
        {child}
      </Heading>
    );

    const renderedHeading = renderedComponent.container.firstChild;

    it('matches the snapshot', () => {
      expect(renderedComponent.asFragment()).toMatchSnapshot();
    });

    it(`renders "${className}" in the heading's classList`, () => {
      expect(renderedHeading.classList.contains(className)).toBe(true);
    });

    it(`renders "${child}" as the heading's textContent`, () => {
      expect(renderedHeading.textContent).toBe(child);
    });

    it(`renders "${title}" as the heading title`, () => {
      expect(renderedHeading.title).toBe(title);
    });
  });

  describe('<Overline/>', () => {
    it('matches the snapshot', () => {
      const renderedComponent = renderWithTheme(
        <Overline>Overline content</Overline>
      );
      expect(renderedComponent).toMatchSnapshot();
    });
  });

  describe('<Subtitle/>', () => {
    it('matches the snapshot', () => {
      const renderedComponent = renderWithTheme(
        <Subtitle>Subtitle content</Subtitle>
      );
      expect(renderedComponent).toMatchSnapshot();
    });
  });

  describe('<Lead/>', () => {
    it('matches the snapshot', () => {
      const renderedComponent = renderWithTheme(<Lead>Lead content</Lead>);
      expect(renderedComponent).toMatchSnapshot();
    });
  });

  describe('<Table />', () => {
    const tableContent = (
      <>
        <caption>This is a table caption</caption>
        <thead>
          <tr>
            <th scope='col'>#</th>
            <th scope='col'>Lorem</th>
            <th scope='col'>Ipsum Dolor</th>
            <th scope='col'>Sit Amet</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <th scope='row'>1</th>
            <td>Aliquam erat</td>
            <td>Volutpat</td>
            <td>Praesent</td>
          </tr>
          <tr>
            <th scope='row'>2</th>
            <td>Aenean</td>
            <td>Finibus</td>
            <td>Accumsan</td>
          </tr>
        </tbody>
        <tfoot>
          <tr>
            <th scope='row'>Total</th>
            <td>20</td>
            <td>300.00â‚¬</td>
            <td>450</td>
          </tr>
        </tfoot>
      </>
    );

    it('matches the snapshot', () => {
      const renderedComponent = renderWithTheme(<Table>{tableContent}</Table>);
      expect(renderedComponent).toMatchSnapshot();
    });

    it('zebra matches the snapshot', () => {
      const renderedComponent = renderWithTheme(
        <Table zebra>{tableContent}</Table>
      );
      expect(renderedComponent).toMatchSnapshot();
    });
  });
});
