import { useState } from 'react';
import { Meta, Story, Canvas, ArgsTable } from '@storybook/addon-docs';
import styled from 'styled-components';

import {
  CollecticonEllipsisHorizontal,
  CollecticonPencil,
  CollecticonDownload,
  CollecticonTrashBin,
  CollecticonCircleQuestion,
  CollecticonXmarkSmall,
} from '@devseed-ui/collecticons';
import { backgroundOption } from '../../../.storybook/story-utils';

import {
  Toolbar,
  ToolbarGroup,
  ToolbarLabel,
  ToolbarButton,
  ToolbarIconButton,
  VerticalDivider,
} from '.';

<Meta title="Components/Toolbar" />

## Toolbar

The `Toolbar` module exports several components to assist the user in creating the toolbar.

```
yarn add @devseed-ui/toolbar
```

```js
import {
  Toolbar,
  ToolbarGroup,
  ToolbarLabel,
  ToolbarButton,
  ToolbarIconButton,
  ToolbarProvider,
  useToolbar,
  ToolbarContextButton,
} from '@devseed-ui/toolbar';
```

<Canvas>
  <Story
    name="Simple"
    argTypes={{
      size: {
        name: 'size',
        type: { name: 'string', required: false },
        defaultValue: 'medium',
        description: 'The toolbar will apply the size property to the children of type `ToolbarButton` and `ToolbarIconButton` ensuring that they fit properly. Any custom element will have to be managed manually.',
        table: {
          type: { summary: 'string' },
          defaultValue: { summary: 'medium' },
        },
        control: {
          type: 'select',
        },
        options: ['small', 'medium', 'large'],
      },
    }}
  >
    {args => (
      <Toolbar aria-label="toolbar" {...args}>
        <ToolbarGroup aria-labelledby="label-1">
          <ToolbarLabel id="label-1">Toolbar label</ToolbarLabel>
          <ToolbarIconButton title="More options">
            <CollecticonEllipsisHorizontal title="More options" meaningful />
          </ToolbarIconButton>
          <ToolbarButton>
            <CollecticonPencil />
            Edit
          </ToolbarButton>
          <VerticalDivider />
          <ToolbarIconButton title="Download">
            <CollecticonDownload title="Download" meaningful />
          </ToolbarIconButton>
        </ToolbarGroup>
        <ToolbarGroup aria-labelledby="label-2">
          <ToolbarLabel id="label-2">Another label</ToolbarLabel>
          <ToolbarButton>
            <CollecticonTrashBin />
            Delete
          </ToolbarButton>
          <VerticalDivider />
          <ToolbarButton>
            <CollecticonCircleQuestion />
            What is this?
          </ToolbarButton>
          <VerticalDivider />
          <ToolbarIconButton>
            <CollecticonXmarkSmall title="Close" meaningful />
          </ToolbarIconButton>
        </ToolbarGroup>
      </Toolbar>
    )}
  </Story>
</Canvas>

<ArgsTable story="Simple" />

> If you're building your own custom toolbar buttons and want them to react to the props passed to a `Toolbar` you can use the `useToolbar` hook.

#### Accessibility

- Add a `aria-labelledby` attribute to `Toolbar` to set the toolbar's label, or, if used without a visual label, add a `aria-label` attribute.
- Add a `aria-labelledby` attribute to `ToolbarGroup` to set the toolbar's label, or, if used without a visual label, add a `aria-label` attribute.

export const variationProp = {
  variation: {
    name: 'variation',
    type: { name: 'string', required: false },
    defaultValue: 'dark',
    description: 'Color variation depending of the type of background the toolbar is used on.',
    table: {
      type: { summary: 'string' },
      defaultValue: { summary: 'dark' },
    },
    control: {
      type: 'select',
    },
    options: ['light', 'dark'],
  },
};

export const BgWrapper = styled.div`
  padding: 1rem;
  ${backgroundOption}
`;

### VerticalDivider

Small vertical divider to provide some separation of concerns.

<Canvas>
  <Story
    name="Vertical Divider"
    argTypes={variationProp}
  >
    {args => (
      <BgWrapper bg={args.variation === 'dark' ? 'light' : 'dark'}>
        <Toolbar aria-label="toolbar">
          <VerticalDivider {...args} />
        </Toolbar>
      </BgWrapper>
    )}
  </Story>
</Canvas>

<ArgsTable story="Vertical Divider" />

### ToolbarGroup

A wrapper to group elements of the toolbar.

### ToolbarLabel

Textual label to describe toolbar actions.

<Canvas>
  <Story
    name="Toolbar label"
    argTypes={variationProp}
  >
    {args => (
      <BgWrapper bg={args.variation === 'dark' ? 'light' : 'dark'}>
        <Toolbar aria-label="toolbar">
          <ToolbarLabel id="label-1" {...args}>Toolbar label</ToolbarLabel>
        </Toolbar>
      </BgWrapper>
    )}
  </Story>
</Canvas>

<ArgsTable story="Toolbar label" />

### ToolbarButton

Button for the toolbar. Inherits all the properties of `@devseed-ui/button` but also responds to size changes defined by the parent `Toolbar`.

### ToolbarIconButton

Button for the toolbar when only the button's icon should be shown. Inherits all the properties of `@devseed-ui/button` but also responds to size changes defined by the parent `Toolbar`.

ðŸ’¡ The only difference between `ToolbarButton` and `ToolbarIconButton` is the addition of `fitting='skinny'` to `ToolbarIconButton`. This ensures that the icon is displayed correctly. View the [Button docs](/docs/components-button--simple) to know more.
